import{_ as e,c as s,e as n,a,f as d,o as t}from"./app-D6reFFuO.js";const i={},l=a("h1",{id:"caddy",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#caddy"},[a("span",null,"Caddy")])],-1),c=d(`<h2 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h2><p>打开 <a href="https://caddyserver.com/download" target="_blank" rel="noopener noreferrer">下载</a> 页面，选择对应的平台后点击下载按钮</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>移动下载的二进制文件到 <code>/usr/bin/</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">mv</span> caddy_linux_amd64 /usr/bin/caddy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改 <code>caddy</code> 权限</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">755</span> /usr/bin/caddy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试是否有效</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ caddy version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个名为 <code>caddy</code> 的组</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">groupadd</span> <span class="token parameter variable">--system</span> caddy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个名为 <code>caddy</code> 且有可写的主目录的用户</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">--system</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">--gid</span> caddy <span class="token punctuation">\\</span>
    --create-home <span class="token punctuation">\\</span>
    --home-dir /var/lib/caddy <span class="token punctuation">\\</span>
    <span class="token parameter variable">--shell</span> /usr/sbin/nologin <span class="token punctuation">\\</span>
    <span class="token parameter variable">--comment</span> <span class="token string">&quot;Caddy web server&quot;</span> <span class="token punctuation">\\</span>
    caddy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><p>创建一个名为 <code>foobar.com</code> 的站点目录</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">-m</span> <span class="token number">777</span> /var/www/foobar.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个名为 <code>Caddyfile</code> 的配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">mkdir</span> /etc/caddy
$ <span class="token function">sudo</span> <span class="token function">touch</span> /etc/caddy/Caddyfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置文件内容</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>foobar.com, www.foobar.com {
  root * /var/www/foobar.com
  file_server

  encode zstd gzip

  route {
    try_files {path} /index.html
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务" tabindex="-1"><a class="header-anchor" href="#服务"><span>服务</span></a></h2><p>将服务文件下载到 <code>/etc/systemd/system</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">wget</span> <span class="token parameter variable">-P</span> /etc/systemd/system https://raw.githubusercontent.com/caddyserver/dist/master/init/caddy.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启用 <code>caddy</code> 服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> systemctl daemon-reload
$ <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> caddy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>检查是否在运行中</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ systemctl status caddy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="日志" tabindex="-1"><a class="header-anchor" href="#日志"><span>日志</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> journalctl <span class="token parameter variable">-u</span> caddy <span class="token parameter variable">-f</span> <span class="token parameter variable">-o</span> json-pretty
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,29);function r(o,p){return t(),s("div",null,[l,n(" more "),c])}const m=e(i,[["render",r],["__file","caddy.html.vue"]]),v=JSON.parse('{"path":"/tutorial/caddy.html","title":"Caddy","lang":"zh-CN","frontmatter":{"title":"Caddy","date":"2021-07-23T10:33:16.000Z","category":["教程"],"order":1,"head":[["meta",{"property":"og:url","content":"https://wome.ng/tutorial/caddy.html"}],["meta",{"property":"og:site_name","content":"我梦的笔记本"}],["meta",{"property":"og:title","content":"Caddy"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-25T08:45:14.000Z"}],["meta",{"property":"article:author","content":"我梦"}],["meta",{"property":"article:published_time","content":"2021-07-23T10:33:16.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-25T08:45:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Caddy\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-07-23T10:33:16.000Z\\",\\"dateModified\\":\\"2024-05-25T08:45:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"我梦\\",\\"url\\":\\"https://wome.ng\\"}]}"]]},"headers":[{"level":2,"title":"下载","slug":"下载","link":"#下载","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[]},{"level":2,"title":"服务","slug":"服务","link":"#服务","children":[]},{"level":2,"title":"日志","slug":"日志","link":"#日志","children":[]}],"git":{"createdTime":1716626714000,"updatedTime":1716626714000,"contributors":[{"name":"Foobar","email":"github@foobar.com","commits":1}]},"readingTime":{"minutes":0.81,"words":242},"filePathRelative":"tutorial/caddy.md","localizedDate":"2021年7月23日","excerpt":"\\n"}');export{m as comp,v as data};
